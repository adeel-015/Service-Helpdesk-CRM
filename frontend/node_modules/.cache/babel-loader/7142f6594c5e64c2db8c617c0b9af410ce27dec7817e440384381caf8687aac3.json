{"ast":null,"code":"import _objectSpread from\"/Users/adeeljaved/Documents/proxima_crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect,useRef,forwardRef,useImperativeHandle}from\"react\";import{Search,Filter,X}from\"lucide-react\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TicketFilters=/*#__PURE__*/forwardRef((_ref,ref)=>{let{onFilterChange,agents=[]}=_ref;const[filters,setFilters]=useState({search:\"\",status:\"\",priority:\"\",assignedAgent:\"\"});const[debouncedSearch,setDebouncedSearch]=useState(\"\");const searchInputRef=useRef(null);useImperativeHandle(ref,()=>({focus:()=>{if(searchInputRef.current)searchInputRef.current.focus();}}));// debounce the search input before notifying parent\nuseEffect(()=>{const t=setTimeout(()=>setDebouncedSearch(filters.search),400);return()=>clearTimeout(t);},[filters.search]);// Notify parent when filters change (debounced search)\nuseEffect(()=>{if(typeof onFilterChange===\"function\"){onFilterChange(_objectSpread(_objectSpread({},filters),{},{search:debouncedSearch}));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[debouncedSearch,filters.status,filters.priority,filters.assignedAgent]);const handleChange=e=>{const{name,value}=e.target;setFilters(f=>_objectSpread(_objectSpread({},f),{},{[name]:value}));};const clearFilters=()=>setFilters({search:\"\",status:\"\",priority:\"\",assignedAgent:\"\"});const hasActiveFilters=!!filters.search||!!filters.status||!!filters.priority||!!filters.assignedAgent;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(Filter,{className:\"w-5 h-5 text-gray-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-900\",children:\"Filters\"}),hasActiveFilters&&/*#__PURE__*/_jsxs(\"button\",{onClick:clearFilters,className:\"ml-auto text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1\",\"aria-label\":\"Clear all filters\",children:[/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"}),\"Clear All\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Search,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{ref:searchInputRef,type:\"text\",name:\"search\",value:filters.search,onChange:handleChange,placeholder:\"Search tickets...\",className:\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\"aria-label\":\"Search tickets\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"status\",value:filters.status,onChange:handleChange,className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\"aria-label\":\"Filter by status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Statuses\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Open\",children:\"Open\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Resolved\",children:\"Resolved\"})]}),/*#__PURE__*/_jsxs(\"select\",{name:\"priority\",value:filters.priority,onChange:handleChange,className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\"aria-label\":\"Filter by priority\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Priorities\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"High\",children:\"High\"})]}),agents.length>0?/*#__PURE__*/_jsxs(\"select\",{name:\"assignedAgent\",value:filters.assignedAgent,onChange:handleChange,className:\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",\"aria-label\":\"Filter by assigned agent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"All Agents\"}),agents.map(agent=>/*#__PURE__*/_jsx(\"option\",{value:agent._id,children:agent.username},agent._id))]}):/*#__PURE__*/// keep layout consistent when no agents\n_jsx(\"div\",{})]})]});});TicketFilters.displayName=\"TicketFilters\";export default TicketFilters;","map":{"version":3,"names":["useState","useEffect","useRef","forwardRef","useImperativeHandle","Search","Filter","X","jsx","_jsx","jsxs","_jsxs","TicketFilters","_ref","ref","onFilterChange","agents","filters","setFilters","search","status","priority","assignedAgent","debouncedSearch","setDebouncedSearch","searchInputRef","focus","current","t","setTimeout","clearTimeout","_objectSpread","handleChange","e","name","value","target","f","clearFilters","hasActiveFilters","className","children","onClick","type","onChange","placeholder","length","map","agent","_id","username","displayName"],"sources":["/Users/adeeljaved/Documents/proxima_crm/frontend/src/components/tickets/TicketFilters.jsx"],"sourcesContent":["import {\n  useState,\n  useEffect,\n  useRef,\n  forwardRef,\n  useImperativeHandle,\n} from \"react\";\nimport { Search, Filter, X } from \"lucide-react\";\n\nconst TicketFilters = forwardRef(({ onFilterChange, agents = [] }, ref) => {\n  const [filters, setFilters] = useState({\n    search: \"\",\n    status: \"\",\n    priority: \"\",\n    assignedAgent: \"\",\n  });\n\n  const [debouncedSearch, setDebouncedSearch] = useState(\"\");\n  const searchInputRef = useRef(null);\n\n  useImperativeHandle(ref, () => ({\n    focus: () => {\n      if (searchInputRef.current) searchInputRef.current.focus();\n    },\n  }));\n\n  // debounce the search input before notifying parent\n  useEffect(() => {\n    const t = setTimeout(() => setDebouncedSearch(filters.search), 400);\n    return () => clearTimeout(t);\n  }, [filters.search]);\n\n  // Notify parent when filters change (debounced search)\n  useEffect(() => {\n    if (typeof onFilterChange === \"function\") {\n      onFilterChange({ ...filters, search: debouncedSearch });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [debouncedSearch, filters.status, filters.priority, filters.assignedAgent]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFilters((f) => ({ ...f, [name]: value }));\n  };\n\n  const clearFilters = () =>\n    setFilters({ search: \"\", status: \"\", priority: \"\", assignedAgent: \"\" });\n\n  const hasActiveFilters =\n    !!filters.search || !!filters.status || !!filters.priority || !!filters.assignedAgent;\n\n  return (\n    <div className=\"bg-white p-4 rounded-lg shadow-md border border-gray-200\">\n      <div className=\"flex items-center gap-2 mb-4\">\n        <Filter className=\"w-5 h-5 text-gray-600\" />\n        <h3 className=\"text-lg font-semibold text-gray-900\">Filters</h3>\n        {hasActiveFilters && (\n          <button\n            onClick={clearFilters}\n            className=\"ml-auto text-sm text-blue-600 hover:text-blue-700 flex items-center gap-1\"\n            aria-label=\"Clear all filters\"\n          >\n            <X className=\"w-4 h-4\" />\n            Clear All\n          </button>\n        )}\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400\" />\n          <input\n            ref={searchInputRef}\n            type=\"text\"\n            name=\"search\"\n            value={filters.search}\n            onChange={handleChange}\n            placeholder=\"Search tickets...\"\n            className=\"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            aria-label=\"Search tickets\"\n          />\n        </div>\n\n        <select\n          name=\"status\"\n          value={filters.status}\n          onChange={handleChange}\n          className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          aria-label=\"Filter by status\"\n        >\n          <option value=\"\">All Statuses</option>\n          <option value=\"Open\">Open</option>\n          <option value=\"In Progress\">In Progress</option>\n          <option value=\"Resolved\">Resolved</option>\n        </select>\n\n        <select\n          name=\"priority\"\n          value={filters.priority}\n          onChange={handleChange}\n          className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          aria-label=\"Filter by priority\"\n        >\n          <option value=\"\">All Priorities</option>\n          <option value=\"Low\">Low</option>\n          <option value=\"Medium\">Medium</option>\n          <option value=\"High\">High</option>\n        </select>\n\n        {agents.length > 0 ? (\n          <select\n            name=\"assignedAgent\"\n            value={filters.assignedAgent}\n            onChange={handleChange}\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n            aria-label=\"Filter by assigned agent\"\n          >\n            <option value=\"\">All Agents</option>\n            {agents.map((agent) => (\n              <option key={agent._id} value={agent._id}>\n                {agent.username}\n              </option>\n            ))}\n          </select>\n        ) : (\n          // keep layout consistent when no agents\n          <div />\n        )}\n      </div>\n    </div>\n  );\n});\n\nTicketFilters.displayName = \"TicketFilters\";\n\nexport default TicketFilters;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}