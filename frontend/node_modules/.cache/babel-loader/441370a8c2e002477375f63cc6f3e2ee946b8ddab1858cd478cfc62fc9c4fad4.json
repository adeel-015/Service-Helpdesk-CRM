{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Activity,Clock}from\"lucide-react\";import ApiService from\"../../services/api\";import LoadingSpinner from\"../common/LoadingSpinner\";import EmptyState from\"../common/EmptyState\";import toast from\"react-hot-toast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ActivityLogViewer=()=>{const[logs,setLogs]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchActivityLogs();},[]);const fetchActivityLogs=async()=>{try{const data=await ApiService.getActivityLogs();setLogs(data);}catch(error){toast.error(\"Failed to load activity logs\");}finally{setLoading(false);}};const getActionColor=action=>{switch(action){case\"CREATE\":return\"bg-green-100 text-green-800\";case\"UPDATE\":return\"bg-blue-100 text-blue-800\";case\"DELETE\":return\"bg-red-100 text-red-800\";case\"ASSIGN\":return\"bg-purple-100 text-purple-800\";default:return\"bg-gray-100 text-gray-800\";}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(LoadingSpinner,{size:\"lg\",text:\"Loading activity logs...\"})});}if(logs.length===0){return/*#__PURE__*/_jsx(EmptyState,{icon:Activity,title:\"No activity logs\",description:\"There are no activity logs to display.\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md border border-gray-200\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-6 border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold text-gray-900 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Activity,{className:\"w-6 h-6\"}),\"System Activity Logs\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:logs.map((log,index)=>{var _log$user;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 mt-1\",children:/*#__PURE__*/_jsx(Clock,{className:\"w-5 h-5 text-gray-400\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-900\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold\",children:((_log$user=log.user)===null||_log$user===void 0?void 0:_log$user.username)||\"System\"}),\" \",\"performed\",\" \",/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-medium rounded \".concat(getActionColor(log.action)),children:log.action}),\" \",\"on \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:log.entityType})]}),log.entityId&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[\"Entity ID: \",log.entityId]})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 whitespace-nowrap ml-4\",children:new Date(log.timestamp).toLocaleString()})]}),log.changes&&Object.keys(log.changes).length>0&&/*#__PURE__*/_jsxs(\"details\",{className:\"mt-2\",children:[/*#__PURE__*/_jsx(\"summary\",{className:\"text-xs text-blue-600 cursor-pointer hover:text-blue-700\",children:\"View changes\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-xs text-gray-600 mt-2 bg-gray-50 p-2 rounded overflow-x-auto\",children:JSON.stringify(log.changes,null,2)})]})]})]},index);})})})]});};export default ActivityLogViewer;","map":{"version":3,"names":["useState","useEffect","Activity","Clock","ApiService","LoadingSpinner","EmptyState","toast","jsx","_jsx","jsxs","_jsxs","ActivityLogViewer","logs","setLogs","loading","setLoading","fetchActivityLogs","data","getActivityLogs","error","getActionColor","action","className","children","size","text","length","icon","title","description","map","log","index","_log$user","user","username","concat","entityType","entityId","Date","timestamp","toLocaleString","changes","Object","keys","JSON","stringify"],"sources":["/Users/adeeljaved/Documents/proxima_crm/frontend/src/components/activity/ActivityLogViewer.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Activity, Clock } from \"lucide-react\";\nimport ApiService from \"../../services/api\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\nimport EmptyState from \"../common/EmptyState\";\nimport toast from \"react-hot-toast\";\n\nconst ActivityLogViewer = () => {\n  const [logs, setLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchActivityLogs();\n  }, []);\n\n  const fetchActivityLogs = async () => {\n    try {\n      const data = await ApiService.getActivityLogs();\n      setLogs(data);\n    } catch (error) {\n      toast.error(\"Failed to load activity logs\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getActionColor = (action) => {\n    switch (action) {\n      case \"CREATE\":\n        return \"bg-green-100 text-green-800\";\n      case \"UPDATE\":\n        return \"bg-blue-100 text-blue-800\";\n      case \"DELETE\":\n        return \"bg-red-100 text-red-800\";\n      case \"ASSIGN\":\n        return \"bg-purple-100 text-purple-800\";\n      default:\n        return \"bg-gray-100 text-gray-800\";\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <LoadingSpinner size=\"lg\" text=\"Loading activity logs...\" />\n      </div>\n    );\n  }\n\n  if (logs.length === 0) {\n    return (\n      <EmptyState\n        icon={Activity}\n        title=\"No activity logs\"\n        description=\"There are no activity logs to display.\"\n      />\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md border border-gray-200\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <h2 className=\"text-xl font-bold text-gray-900 flex items-center gap-2\">\n          <Activity className=\"w-6 h-6\" />\n          System Activity Logs\n        </h2>\n      </div>\n\n      <div className=\"p-6\">\n        <div className=\"space-y-4\">\n          {logs.map((log, index) => (\n            <div\n              key={index}\n              className=\"flex gap-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors\"\n            >\n              <div className=\"flex-shrink-0 mt-1\">\n                <Clock className=\"w-5 h-5 text-gray-400\" />\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-start justify-between\">\n                  <div>\n                    <p className=\"text-sm text-gray-900\">\n                      <span className=\"font-semibold\">\n                        {log.user?.username || \"System\"}\n                      </span>{\" \"}\n                      performed{\" \"}\n                      <span\n                        className={`px-2 py-1 text-xs font-medium rounded ${getActionColor(\n                          log.action\n                        )}`}\n                      >\n                        {log.action}\n                      </span>{\" \"}\n                      on <span className=\"font-medium\">{log.entityType}</span>\n                    </p>\n                    {log.entityId && (\n                      <p className=\"text-xs text-gray-500 mt-1\">\n                        Entity ID: {log.entityId}\n                      </p>\n                    )}\n                  </div>\n                  <span className=\"text-xs text-gray-500 whitespace-nowrap ml-4\">\n                    {new Date(log.timestamp).toLocaleString()}\n                  </span>\n                </div>\n                {log.changes && Object.keys(log.changes).length > 0 && (\n                  <details className=\"mt-2\">\n                    <summary className=\"text-xs text-blue-600 cursor-pointer hover:text-blue-700\">\n                      View changes\n                    </summary>\n                    <pre className=\"text-xs text-gray-600 mt-2 bg-gray-50 p-2 rounded overflow-x-auto\">\n                      {JSON.stringify(log.changes, null, 2)}\n                    </pre>\n                  </details>\n                )}\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ActivityLogViewer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}