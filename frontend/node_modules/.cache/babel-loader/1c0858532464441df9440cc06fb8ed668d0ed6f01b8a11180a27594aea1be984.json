{"ast":null,"code":"const API_BASE_URL = process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\nclass ApiService {\n  static getAuthHeader() {\n    const token = localStorage.getItem(\"token\");\n    return token ? {\n      Authorization: `Bearer ${token}`\n    } : {};\n  }\n  static async handleResponse(response) {\n    if (!response.ok) {\n      const error = await response.json().catch(() => ({\n        message: \"Request failed\"\n      }));\n      throw new Error(error.message || `HTTP ${response.status}`);\n    }\n    return response.json();\n  }\n\n  // Auth endpoints\n  static async login(username, password) {\n    const response = await fetch(`${API_BASE_URL}/auth/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        username,\n        password\n      })\n    });\n    return this.handleResponse(response);\n  }\n  static async register(userData) {\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    });\n    return this.handleResponse(response);\n  }\n\n  // Ticket endpoints\n  static async getTickets(filters = {}) {\n    const params = new URLSearchParams();\n    Object.keys(filters).forEach(key => {\n      if (filters[key]) params.append(key, filters[key]);\n    });\n    const response = await fetch(`${API_BASE_URL}/tickets?${params}`, {\n      headers: this.getAuthHeader()\n    });\n    return this.handleResponse(response);\n  }\n  static async createTicket(ticketData) {\n    const response = await fetch(`${API_BASE_URL}/tickets`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader()\n      },\n      body: JSON.stringify(ticketData)\n    });\n    return this.handleResponse(response);\n  }\n  static async updateTicket(id, ticketData) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader()\n      },\n      body: JSON.stringify(ticketData)\n    });\n    return this.handleResponse(response);\n  }\n  static async deleteTicket(id) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}`, {\n      method: \"DELETE\",\n      headers: this.getAuthHeader()\n    });\n    return this.handleResponse(response);\n  }\n  static async assignTicket(id, agentId) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}/assign`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader()\n      },\n      body: JSON.stringify({\n        agentId\n      })\n    });\n    return this.handleResponse(response);\n  }\n  static async getTicketActivity(id) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}/activity`, {\n      headers: this.getAuthHeader()\n    });\n    return this.handleResponse(response);\n  }\n\n  // User endpoints\n  static async getUsers(role) {\n    const params = role ? `?role=${role}` : \"\";\n    const response = await fetch(`${API_BASE_URL}/users${params}`, {\n      headers: this.getAuthHeader()\n    });\n    const data = await this.handleResponse(response);\n    // backend may return { users, total } for paginated responses\n    return Array.isArray(data) ? data : data.users || [];\n  }\n  static async updateUser(id, userData) {\n    // backend expects role update at /users/:id/role\n    const response = await fetch(`${API_BASE_URL}/users/${id}/role`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader()\n      },\n      body: JSON.stringify(userData)\n    });\n    return this.handleResponse(response);\n  }\n  static async deleteUser(id) {\n    const response = await fetch(`${API_BASE_URL}/users/${id}`, {\n      method: \"DELETE\",\n      headers: this.getAuthHeader()\n    });\n    return this.handleResponse(response);\n  }\n\n  // Activity logs\n  static async getActivityLogs() {\n    const response = await fetch(`${API_BASE_URL}/activity-logs`, {\n      headers: this.getAuthHeader()\n    });\n    const data = await this.handleResponse(response);\n    // backend returns { logs, total }\n    return Array.isArray(data) ? data : data.logs || [];\n  }\n}\nexport default ApiService;","map":{"version":3,"names":["API_BASE_URL","process","env","REACT_APP_API_URL","ApiService","getAuthHeader","token","localStorage","getItem","Authorization","handleResponse","response","ok","error","json","catch","message","Error","status","login","username","password","fetch","method","headers","body","JSON","stringify","register","userData","getTickets","filters","params","URLSearchParams","Object","keys","forEach","key","append","createTicket","ticketData","updateTicket","id","deleteTicket","assignTicket","agentId","getTicketActivity","getUsers","role","data","Array","isArray","users","updateUser","deleteUser","getActivityLogs","logs"],"sources":["/Users/adeeljaved/Documents/proxima_crm/frontend/src/services/api.js"],"sourcesContent":["const API_BASE_URL =\n  process.env.REACT_APP_API_URL || \"http://localhost:5000/api\";\n\nclass ApiService {\n  static getAuthHeader() {\n    const token = localStorage.getItem(\"token\");\n    return token ? { Authorization: `Bearer ${token}` } : {};\n  }\n\n  static async handleResponse(response) {\n    if (!response.ok) {\n      const error = await response\n        .json()\n        .catch(() => ({ message: \"Request failed\" }));\n      throw new Error(error.message || `HTTP ${response.status}`);\n    }\n    return response.json();\n  }\n\n  // Auth endpoints\n  static async login(username, password) {\n    const response = await fetch(`${API_BASE_URL}/auth/login`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ username, password }),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async register(userData) {\n    const response = await fetch(`${API_BASE_URL}/auth/register`, {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(userData),\n    });\n    return this.handleResponse(response);\n  }\n\n  // Ticket endpoints\n  static async getTickets(filters = {}) {\n    const params = new URLSearchParams();\n    Object.keys(filters).forEach((key) => {\n      if (filters[key]) params.append(key, filters[key]);\n    });\n\n    const response = await fetch(`${API_BASE_URL}/tickets?${params}`, {\n      headers: this.getAuthHeader(),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async createTicket(ticketData) {\n    const response = await fetch(`${API_BASE_URL}/tickets`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader(),\n      },\n      body: JSON.stringify(ticketData),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async updateTicket(id, ticketData) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader(),\n      },\n      body: JSON.stringify(ticketData),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async deleteTicket(id) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}`, {\n      method: \"DELETE\",\n      headers: this.getAuthHeader(),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async assignTicket(id, agentId) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}/assign`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader(),\n      },\n      body: JSON.stringify({ agentId }),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async getTicketActivity(id) {\n    const response = await fetch(`${API_BASE_URL}/tickets/${id}/activity`, {\n      headers: this.getAuthHeader(),\n    });\n    return this.handleResponse(response);\n  }\n\n  // User endpoints\n  static async getUsers(role) {\n    const params = role ? `?role=${role}` : \"\";\n    const response = await fetch(`${API_BASE_URL}/users${params}`, {\n      headers: this.getAuthHeader(),\n    });\n    const data = await this.handleResponse(response);\n    // backend may return { users, total } for paginated responses\n    return Array.isArray(data) ? data : data.users || [];\n  }\n\n  static async updateUser(id, userData) {\n    // backend expects role update at /users/:id/role\n    const response = await fetch(`${API_BASE_URL}/users/${id}/role`, {\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        ...this.getAuthHeader(),\n      },\n      body: JSON.stringify(userData),\n    });\n    return this.handleResponse(response);\n  }\n\n  static async deleteUser(id) {\n    const response = await fetch(`${API_BASE_URL}/users/${id}`, {\n      method: \"DELETE\",\n      headers: this.getAuthHeader(),\n    });\n    return this.handleResponse(response);\n  }\n\n  // Activity logs\n  static async getActivityLogs() {\n    const response = await fetch(`${API_BASE_URL}/activity-logs`, {\n      headers: this.getAuthHeader(),\n    });\n    const data = await this.handleResponse(response);\n    // backend returns { logs, total }\n    return Array.isArray(data) ? data : data.logs || [];\n  }\n}\n\nexport default ApiService;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}