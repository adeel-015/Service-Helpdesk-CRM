{"ast":null,"code":"import _objectSpread from\"/Users/adeeljaved/Documents/proxima_crm/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import toast from\"react-hot-toast\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TicketForm=_ref=>{let{onSubmit,onCancel,initialData=null}=_ref;const[formData,setFormData]=useState({title:(initialData===null||initialData===void 0?void 0:initialData.title)||\"\",description:(initialData===null||initialData===void 0?void 0:initialData.description)||\"\",// Restrict to backend-accepted values\npriority:(initialData===null||initialData===void 0?void 0:initialData.priority)||\"Medium\",status:(initialData===null||initialData===void 0?void 0:initialData.status)||\"Open\"});const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();// Client-side validation to avoid backend 400s\nif(!formData.title||formData.title.trim().length<5){return toast.error(\"Title must be at least 5 characters\");}if(!formData.description||formData.description.trim().length<10){return toast.error(\"Description must be at least 10 characters\");}// Ensure values are within allowed enums\nconst allowedPriorities=[\"Low\",\"Medium\",\"High\"];const allowedStatuses=[\"Open\",\"In Progress\",\"Resolved\"];if(!allowedPriorities.includes(formData.priority)){return toast.error(\"Invalid priority selected\");}if(!allowedStatuses.includes(formData.status)){return toast.error(\"Invalid status selected\");}try{await onSubmit(formData);toast.success(initialData?\"Ticket updated successfully\":\"Ticket created successfully\");}catch(error){toast.error(error.message||\"Operation failed\");}};return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"title\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Title \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",value:formData.title,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",required:true,minLength:\"5\",maxLength:\"200\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[formData.title.length,\"/200 characters (minimum 5)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"description\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:[\"Description \",/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",name:\"description\",value:formData.description,onChange:handleChange,rows:\"4\",className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",required:true,minLength:\"10\",maxLength:\"2000\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:[formData.description.length,\"/2000 characters (minimum 10)\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"priority\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Priority\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"priority\",name:\"priority\",value:formData.priority,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Low\",children:\"Low\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Medium\",children:\"Medium\"}),/*#__PURE__*/_jsx(\"option\",{value:\"High\",children:\"High\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"status\",className:\"block text-sm font-medium text-gray-700 mb-1\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"status\",name:\"status\",value:formData.status,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Open\",children:\"Open\"}),/*#__PURE__*/_jsx(\"option\",{value:\"In Progress\",children:\"In Progress\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Resolved\",children:\"Resolved\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 justify-end pt-4\",children:[onCancel&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\",children:initialData?\"Update Ticket\":\"Create Ticket\"})]})]});};export default TicketForm;","map":{"version":3,"names":["React","useState","toast","jsx","_jsx","jsxs","_jsxs","TicketForm","_ref","onSubmit","onCancel","initialData","formData","setFormData","title","description","priority","status","handleChange","e","_objectSpread","target","name","value","handleSubmit","preventDefault","trim","length","error","allowedPriorities","allowedStatuses","includes","success","message","className","children","htmlFor","type","id","onChange","required","minLength","maxLength","rows","onClick"],"sources":["/Users/adeeljaved/Documents/proxima_crm/frontend/src/components/tickets/TicketForm.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport toast from \"react-hot-toast\";\n\nconst TicketForm = ({ onSubmit, onCancel, initialData = null }) => {\n  const [formData, setFormData] = useState({\n    title: initialData?.title || \"\",\n    description: initialData?.description || \"\",\n    // Restrict to backend-accepted values\n    priority: initialData?.priority || \"Medium\",\n    status: initialData?.status || \"Open\",\n  });\n\n  const handleChange = (e) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value,\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    // Client-side validation to avoid backend 400s\n    if (!formData.title || formData.title.trim().length < 5) {\n      return toast.error(\"Title must be at least 5 characters\");\n    }\n    if (!formData.description || formData.description.trim().length < 10) {\n      return toast.error(\"Description must be at least 10 characters\");\n    }\n    // Ensure values are within allowed enums\n    const allowedPriorities = [\"Low\", \"Medium\", \"High\"];\n    const allowedStatuses = [\"Open\", \"In Progress\", \"Resolved\"];\n    if (!allowedPriorities.includes(formData.priority)) {\n      return toast.error(\"Invalid priority selected\");\n    }\n    if (!allowedStatuses.includes(formData.status)) {\n      return toast.error(\"Invalid status selected\");\n    }\n\n    try {\n      await onSubmit(formData);\n      toast.success(\n        initialData\n          ? \"Ticket updated successfully\"\n          : \"Ticket created successfully\"\n      );\n    } catch (error) {\n      toast.error(error.message || \"Operation failed\");\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"space-y-4\">\n      <div>\n        <label\n          htmlFor=\"title\"\n          className=\"block text-sm font-medium text-gray-700 mb-1\"\n        >\n          Title <span className=\"text-red-500\">*</span>\n        </label>\n        <input\n          type=\"text\"\n          id=\"title\"\n          name=\"title\"\n          value={formData.title}\n          onChange={handleChange}\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          required\n          minLength=\"5\"\n          maxLength=\"200\"\n        />\n        <p className=\"text-xs text-gray-500 mt-1\">\n          {formData.title.length}/200 characters (minimum 5)\n        </p>\n      </div>\n\n      <div>\n        <label\n          htmlFor=\"description\"\n          className=\"block text-sm font-medium text-gray-700 mb-1\"\n        >\n          Description <span className=\"text-red-500\">*</span>\n        </label>\n        <textarea\n          id=\"description\"\n          name=\"description\"\n          value={formData.description}\n          onChange={handleChange}\n          rows=\"4\"\n          className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          required\n          minLength=\"10\"\n          maxLength=\"2000\"\n        />\n        <p className=\"text-xs text-gray-500 mt-1\">\n          {formData.description.length}/2000 characters (minimum 10)\n        </p>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        <div>\n          <label\n            htmlFor=\"priority\"\n            className=\"block text-sm font-medium text-gray-700 mb-1\"\n          >\n            Priority\n          </label>\n          <select\n            id=\"priority\"\n            name=\"priority\"\n            value={formData.priority}\n            onChange={handleChange}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            <option value=\"Low\">Low</option>\n            <option value=\"Medium\">Medium</option>\n            <option value=\"High\">High</option>\n          </select>\n        </div>\n\n        <div>\n          <label\n            htmlFor=\"status\"\n            className=\"block text-sm font-medium text-gray-700 mb-1\"\n          >\n            Status\n          </label>\n          <select\n            id=\"status\"\n            name=\"status\"\n            value={formData.status}\n            onChange={handleChange}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          >\n            <option value=\"Open\">Open</option>\n            <option value=\"In Progress\">In Progress</option>\n            <option value=\"Resolved\">Resolved</option>\n          </select>\n        </div>\n      </div>\n\n      <div className=\"flex gap-3 justify-end pt-4\">\n        {onCancel && (\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\n          >\n            Cancel\n          </button>\n        )}\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n        >\n          {initialData ? \"Update Ticket\" : \"Create Ticket\"}\n        </button>\n      </div>\n    </form>\n  );\n};\n\nexport default TicketForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}